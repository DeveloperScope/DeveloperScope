==== File: ownerlist/utils.py ====
@@ -41,7 +41,6 @@ from docx.shared import Pt, RGBColor
 from tests.mocks.mock_omni_check_status import mock_omni_check_status_200
 from tests.mocks.mock_send_omnitracker import mock_send_omnitracker_200
 
-
 try:
     from requests_ntlm import HttpNtlmAuth
 except ImportError:
@@ -2335,13 +2334,13 @@ def send_onmitracker(
             logger.debug("[TRACE] Тело запроса: " + body.decode())
             if settings.DEBUG:
                 res = mock_send_omnitracker_200(
-                                                taskid="777777",
-                                                omnitracker_url=settings.OMNITRACKER_URL,
-                                                body=body,
-                                                headers=OMNI_HTTP_HEADERS,
-                                                timeout=settings.TIMEOUT,
-                                                auth=auth
-                                                )
+                    taskid="777777",
+                    omnitracker_url=settings.OMNITRACKER_URL,
+                    body=body,
+                    headers=OMNI_HTTP_HEADERS,
+                    timeout=settings.TIMEOUT,
+                    auth=auth,
+                )
             else:
                 res = requests.post(
                     settings.OMNITRACKER_URL,
@@ -2497,36 +2496,39 @@ def omni_check_status(id=None, proxy=None):
         logger.error(f"Ошибка авторизации LDAP: {e}")
         print(f"Ошибка авторизации LDAP: {e}")
 
-    try:
-        if settings.DEBUG:
-            r = mock_omni_check_status_200(acl_status="Assigned",
-                                           omnitracker_url=settings.OMNITRACKER_URL,
-                                           body=body,
-                                           headers=OMNI_HTTP_HEADERS,
-                                           proxies=proxy,
-                                           auth=auth,
-                                           timeout=1)
-        else:
-            r = requests.post(
-                settings.OMNITRACKER_URL,
-                body,
-                headers=OMNI_HTTP_HEADERS,
-                proxies=proxy,
-                auth=auth,
-                timeout=1,
-            )
-        if r.status_code == 200:
-            try:
-                result = r.text
-                if result and len(result) > 3:
-                    result = result.split('strResponse">')
-                    result = result[1].split("</")[0]
-                return OMNI_ACL_STATUS.get(result), OMNI_HTTP_STATUS.get(result)
-            except Exception as e:
-                logger.error("[Check status] " + str(e))
-                if settings.DEBUG:
-                    print(e)
-                return None, None
+    for attempt in range(max_retries):
+        try:
+            if settings.DEBUG:
+                r = mock_omni_check_status_200(
+                    acl_status="Assigned",
+                    omnitracker_url=settings.OMNITRACKER_URL,
+                    body=body,
+                    headers=OMNI_HTTP_HEADERS,
+                    proxies=proxy,
+                    auth=auth,
+                    timeout=1,
+                )
+            else:
+                r = requests.post(
+                    settings.OMNITRACKER_URL,
+                    body,
+                    headers=OMNI_HTTP_HEADERS,
+                    proxies=proxy,
+                    auth=auth,
+                    timeout=1,
+                )
+            if r.status_code == 200:
+                try:
+                    result = r.text
+                    if result and len(result) > 3:
+                        result = result.split('strResponse">')
+                        result = result[1].split("</")[0]
+                    return OMNI_ACL_STATUS.get(result), OMNI_HTTP_STATUS.get(result)
+                except Exception as e:
+                    logger.error("[Check status] " + str(e))
+                    if settings.DEBUG:
+                        print(e)
+                    return None, None
 
         except Exception as e:
             logger.info(f"Ошибка на попытке {attempt + 1} ID:{id} - {e}")
@@ -2931,19 +2933,22 @@ def celery_send_omnitracker(sender, title, text, attach, uuid=None):
     for i in range(settings.ATTEMPS):
         try:
             if settings.DEBUG:
-                res = mock_send_omnitracker_200(taskid="888888",
-                                                omnitracker_url=settings.OMNITRACKER_URL,
-                                                body=body,
-                                                headers=OMNI_HTTP_HEADERS,
-                                                timeout=settings.TIMEOUT,
-                                                auth=auth)
+                res = mock_send_omnitracker_200(
+                    taskid="888888",
+                    omnitracker_url=settings.OMNITRACKER_URL,
+                    body=body,
+                    headers=OMNI_HTTP_HEADERS,
+                    timeout=settings.TIMEOUT,
+                    auth=auth,
+                )
             else:
-                res = requests.post(settings.OMNITRACKER_URL,
-                                    body,
-                                    headers=OMNI_HTTP_HEADERS,
-                                    timeout=settings.TIMEOUT,
-                                    auth=auth,
-                                    )
+                res = requests.post(
+                    settings.OMNITRACKER_URL,
+                    body,
+                    headers=OMNI_HTTP_HEADERS,
+                    timeout=settings.TIMEOUT,
+                    auth=auth,
+                )
 
             if res and res.status_code == 200:
                 result = res.text


